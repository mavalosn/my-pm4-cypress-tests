{"type":"process_package","version":"1","process":{"id":399,"uuid":"97b0b2a3-4a74-4991-bb32-242d316e3cea","process_category_id":"9","user_id":1,"description":"TCP4-2164 Verify Signal Script Task Timer Event and Terminate Event B","name":"TCP4-2164 Verify Signal Script Task Timer Event and Terminate Event B","cancel_screen_id":null,"request_detail_screen_id":null,"status":"ACTIVE","is_valid":1,"package_key":null,"pause_timer_start":0,"deleted_at":null,"created_at":"2021-06-23T23:08:00+00:00","updated_at":"2022-11-08T16:14:50+00:00","start_events":[{"id":"node_3","name":"SignalStartEvent","config":"","ownerProcessId":"ProcessId","eventDefinitions":[{"$type":"signalEventDefinition","signalRef":"VerifySignal"}],"ownerProcessName":"ProcessName"}],"warnings":null,"self_service_tasks":[],"signal_events":["VerifySignal"],"conditional_events":[],"properties":{"manager_id":null,"manager_can_cancel_request":false},"has_timer_start_events":false,"notifications":{"requester":{"started":false,"canceled":false,"completed":false},"assignee":{"started":false,"canceled":false,"completed":false},"participants":{"started":false,"canceled":false,"completed":false},"manager":{"started":false,"canceled":false,"completed":false}},"task_notifications":{},"bpmn":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn:definitions xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xmlns:bpmn=\"http:\/\/www.omg.org\/spec\/BPMN\/20100524\/MODEL\" xmlns:bpmndi=\"http:\/\/www.omg.org\/spec\/BPMN\/20100524\/DI\" xmlns:dc=\"http:\/\/www.omg.org\/spec\/DD\/20100524\/DC\" xmlns:di=\"http:\/\/www.omg.org\/spec\/DD\/20100524\/DI\" xmlns:pm=\"http:\/\/processmaker.com\/BPMN\/2.0\/Schema.xsd\" xmlns:tns=\"http:\/\/sourceforge.net\/bpmn\/definitions\/_1530553328908\" xmlns:xsd=\"http:\/\/www.w3.org\/2001\/XMLSchema\" targetNamespace=\"http:\/\/bpmn.io\/schema\/bpmn\" exporter=\"ProcessMaker Modeler\" exporterVersion=\"1.0\" xsi:schemaLocation=\"http:\/\/www.omg.org\/spec\/BPMN\/20100524\/MODEL http:\/\/bpmn.sourceforge.net\/schemas\/BPMN20.xsd\">\n  <bpmn:process id=\"ProcessId\" name=\"ProcessName\" isExecutable=\"true\">\n    <bpmn:startEvent id=\"node_3\" name=\"SignalStartEvent\" pm:config=\"\">\n      <bpmn:outgoing>node_12<\/bpmn:outgoing>\n      <bpmn:signalEventDefinition signalRef=\"VerifySignal\"\/>\n    <\/bpmn:startEvent>\n    <bpmn:scriptTask id=\"node_5\" name=\"Set Email and PDF Variables\" pm:scriptRef=\"159\">\n      <bpmn:incoming>node_12<\/bpmn:incoming>\n      <bpmn:outgoing>node_6<\/bpmn:outgoing>\n    <\/bpmn:scriptTask>\n    <bpmn:sequenceFlow id=\"node_12\" name=\"\" sourceRef=\"node_3\" targetRef=\"node_5\"\/>\n    <bpmn:callActivity id=\"node_16\" name=\"GetFiles\" calledElement=\"data_source_callback-data_source_sub_process\" pm:config=\"{&quot;outboundConfig&quot;:[],&quot;dataSource&quot;:8,&quot;dataMapping&quot;:[{&quot;value&quot;:&quot;data.0.id&quot;,&quot;key&quot;:&quot;fileId&quot;}],&quot;endpoint&quot;:&quot;ListAll&quot;}\">\n      <bpmn:incoming>node_6<\/bpmn:incoming>\n      <bpmn:outgoing>node_26<\/bpmn:outgoing>\n    <\/bpmn:callActivity>\n    <bpmn:task id=\"node_21\" name=\"AA\" pm:screenRef=\"771\" pm:allowInterstitial=\"false\" pm:assignmentLock=\"false\" pm:allowReassignment=\"false\" pm:config=\"{&quot;reactions&quot;:false,&quot;voting&quot;:false,&quot;edit_comments&quot;:false,&quot;remove_comments&quot;:false,&quot;web_entry&quot;:null,&quot;email_notifications&quot;:{&quot;notifications&quot;:[]}}\">\n      <bpmn:incoming>node_26<\/bpmn:incoming>\n      <bpmn:outgoing>node_4<\/bpmn:outgoing>\n    <\/bpmn:task>\n    <bpmn:sequenceFlow id=\"node_26\" name=\"\" sourceRef=\"node_16\" targetRef=\"node_21\"\/>\n    <bpmn:endEvent id=\"node_1\" name=\"End Event\">\n      <bpmn:incoming>node_4<\/bpmn:incoming>\n    <\/bpmn:endEvent>\n    <bpmn:sequenceFlow id=\"node_6\" name=\"\" sourceRef=\"node_5\" targetRef=\"node_16\"\/>\n    <bpmn:sequenceFlow id=\"node_4\" name=\"\" sourceRef=\"node_21\" targetRef=\"node_1\"\/>\n  <\/bpmn:process>\n  <bpmn:signal id=\"SendTerminateEmails\" name=\"SendTerminateEmails\"\/>\n  <bpmn:signal id=\"terminateInProgress\" name=\"Terminate In Progress\"\/>\n  <bpmn:signal id=\"AAA\" name=\"AAA\"\/>\n  <bpmn:signal id=\"VerifySignal\" name=\"Verify Signal Script Task Timer Event and Terminate Event\"\/>\n  <bpmn:collaboration id=\"collaboration_0\">\n    <bpmn:participant id=\"node_2\" name=\"Pool\" processRef=\"ProcessId\"\/>\n  <\/bpmn:collaboration>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagramId\">\n    <bpmndi:BPMNPlane id=\"BPMNPlaneId\" bpmnElement=\"collaboration_0\">\n      <bpmndi:BPMNShape id=\"node_3_di\" bpmnElement=\"node_3\">\n        <dc:Bounds x=\"720\" y=\"350\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_5_di\" bpmnElement=\"node_5\">\n        <dc:Bounds x=\"830\" y=\"330\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_12_di\" bpmnElement=\"node_12\">\n        <di:waypoint x=\"738\" y=\"368\"\/>\n        <di:waypoint x=\"888\" y=\"368\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_16_di\" bpmnElement=\"node_16\">\n        <dc:Bounds x=\"1040\" y=\"50\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_21_di\" bpmnElement=\"node_21\">\n        <dc:Bounds x=\"830\" y=\"50\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_26_di\" bpmnElement=\"node_26\">\n        <di:waypoint x=\"1098\" y=\"88\"\/>\n        <di:waypoint x=\"888\" y=\"88\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_1_di\" bpmnElement=\"node_1\">\n        <dc:Bounds x=\"870\" y=\"180\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_6_di\" bpmnElement=\"node_6\">\n        <di:waypoint x=\"888\" y=\"368\"\/>\n        <di:waypoint x=\"1098\" y=\"88\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"node_4_di\" bpmnElement=\"node_4\">\n        <di:waypoint x=\"888\" y=\"88\"\/>\n        <di:waypoint x=\"888\" y=\"198\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_2_di\" bpmnElement=\"node_2\">\n        <dc:Bounds x=\"605\" y=\"30\" width=\"665\" height=\"420\"\/>\n      <\/bpmndi:BPMNShape>\n    <\/bpmndi:BPMNPlane>\n  <\/bpmndi:BPMNDiagram>\n<\/bpmn:definitions>\n","anonymousUserId":1},"process_categories":[{"id":9,"uuid":"97a89e67-f09f-4c3f-9a60-439239c45b99","name":"Test Cases Pablo","status":"ACTIVE","is_system":0,"created_at":"2021-05-28T14:01:25+00:00","updated_at":"2022-10-26T18:43:33+00:00","pivot":{"assignable_id":399,"category_id":9,"category_type":"ProcessMaker\\Models\\ProcessCategory"}}],"screens":[{"id":771,"uuid":"97b0b2a3-64bd-40ca-b175-f2b21645d9ef","screen_category_id":"1","title":"Verify Signal Script Task Timer Event and Terminate Event B","description":"Verify Signal Script Task Timer Event and Terminate Event B","type":"FORM","config":[{"name":"Process Child 2 3600","items":[{"label":"Rich Text","config":{"icon":"fas fa-pencil-ruler","label":null,"content":"<p>Request Id<\/p>\n<p>{{_request.id}}<\/p>","interactive":true,"renderVarHtml":false},"component":"FormHtmlViewer","inspector":[{"type":"FormTextArea","field":"content","config":{"rows":5,"label":"Content","value":null,"helper":"The HTML text to display"}},{"type":"FormCheckbox","field":"renderVarHtml","config":{"label":"Render HTML from a Variable","value":null,"helper":null}},{"type":"FormInput","field":"conditionalHide","config":{"label":"Visibility Rule","helper":"This control is hidden until this expression is true"}},{"type":"FormInput","field":"customFormatter","config":{"label":"Custom Format String","helper":"Use the Mask Pattern format <br> Date ##\/##\/#### <br> SSN ###-##-#### <br> Phone (###) ###-####","validation":null}},{"type":"FormInput","field":"customCssSelector","config":{"label":"CSS Selector Name","helper":"Use this in your custom css rules","validation":"regex: [-?[_a-zA-Z]+[_-a-zA-Z0-9]*]"}}],"editor-control":"FormHtmlEditor","editor-component":"FormHtmlEditor"},{"label":"Rich Text","config":{"icon":"fas fa-pencil-ruler","label":null,"content":"<p>Data Base<\/p>\n<p>{{fileId}}<\/p>","interactive":true,"renderVarHtml":false},"component":"FormHtmlViewer","inspector":[{"type":"FormTextArea","field":"content","config":{"rows":5,"label":"Content","value":null,"helper":"The HTML text to display"}},{"type":"FormCheckbox","field":"renderVarHtml","config":{"label":"Render HTML from a Variable","value":null,"helper":null}},{"type":"FormInput","field":"conditionalHide","config":{"label":"Visibility Rule","helper":"This control is hidden until this expression is true"}},{"type":"FormInput","field":"customFormatter","config":{"label":"Custom Format String","helper":"Use the Mask Pattern format <br> Date ##\/##\/#### <br> SSN ###-##-#### <br> Phone (###) ###-####","validation":null}},{"type":"FormInput","field":"customCssSelector","config":{"label":"CSS Selector Name","helper":"Use this in your custom css rules","validation":"regex: [-?[_a-zA-Z]+[_-a-zA-Z0-9]*]"}}],"editor-control":"FormHtmlEditor","editor-component":"FormHtmlEditor"},{"label":"Submit Button","config":{"icon":"fas fa-share-square","name":null,"event":"submit","label":"New Submit","variant":"primary","fieldValue":null,"defaultSubmit":true},"component":"FormButton","inspector":[{"type":"FormInput","field":"label","config":{"label":"Label","helper":"The label describes the button's text"}},{"type":"FormInput","field":"name","config":{"name":"Variable Name","label":"Variable Name","helper":"A variable name is a symbolic name to reference information."}},{"type":"FormMultiselect","field":"event","config":{"label":"Type","helper":"Choose whether the button should submit the form","options":[{"value":"submit","content":"Submit Button"},{"value":"script","content":"Regular Button"}]}},{"type":"FormInput","field":"fieldValue","config":{"label":"Value","helper":"The value being submitted"}},{"type":"FormMultiselect","field":"variant","config":{"label":"Button Variant Style","helper":"The variant determines the appearance of the button","options":[{"value":"primary","content":"Primary"},{"value":"secondary","content":"Secondary"},{"value":"success","content":"Success"},{"value":"danger","content":"Danger"},{"value":"warning","content":"Warning"},{"value":"info","content":"Info"},{"value":"light","content":"Light"},{"value":"dark","content":"Dark"},{"value":"link","content":"Link"}]}},{"type":"FormInput","field":"conditionalHide","config":{"label":"Visibility Rule","helper":"This control is hidden until this expression is true"}},{"type":"FormInput","field":"customFormatter","config":{"label":"Custom Format String","helper":"Use the Mask Pattern format <br> Date ##\/##\/#### <br> SSN ###-##-#### <br> Phone (###) ###-####","validation":null}},{"type":"FormInput","field":"customCssSelector","config":{"label":"CSS Selector Name","helper":"Use this in your custom css rules","validation":"regex: [-?[_a-zA-Z]+[_-a-zA-Z0-9]*]"}}],"editor-control":"FormSubmit","editor-component":"FormButton"}]}],"computed":[],"custom_css":null,"created_at":"2021-07-01T17:49:18+00:00","updated_at":"2022-11-07T20:07:50+00:00","status":"ACTIVE","key":null,"watchers":null,"categories":[{"id":1,"uuid":"97a89e6c-4879-4b4d-ab40-a9464c868d3c","name":"Uncategorized","status":"ACTIVE","is_system":0,"created_at":"2022-09-19T23:12:06+00:00","updated_at":"2022-09-19T23:12:06+00:00","pivot":{"assignable_id":771,"category_id":1,"category_type":"ProcessMaker\\Models\\ScreenCategory"}}]}],"screen_categories":[],"scripts":[{"id":159,"uuid":"97b0b2a3-5cc3-45ac-8af0-9aa852104796","key":null,"title":"TCP4-2164 Verify Signal Script Task Timer Event and Terminate Event B - Set Email to each Employee","description":"Verify Signal Script Task Timer Event and Terminate Event B - Set Email to each Employee","language":"php","code":"<?php \n\n\/\/\/\/---- Flag to send\n$sendEmail = 'YES';\n$emailTo   = '';\n$nameTo    = '';\n$rwaNumber = '';\n$agreementRequestNumber = '';\n\n\/\/\/\/---- Setting data for PDF\n$EIN        = $data['EMAIL_TO'];\n$AgencyName = $data['AGENCY_NAME'];\n$EmployeeName = $data['EMPLOYEE_NAME'];\n$Position = $data['POSITION'];\n$JobTitle = $data['JOB_TITLE'];\n\n\n\n\n\/\/\/\/---- Setting date to Arizona TZ\n$tz = new DateTimeZone('America\/Phoenix');\n$terminateDate = new DateTime($data['ADOA_TA_DATE']);\n$terminateDate->setTimezone($tz);\n$terminateDate = $terminateDate->format('m\/d\/Y');\n\nreturn [\n    'RWA_DATA_COPY' => $dataToSendCopy,\n    'SEND_EMAIL'    => $sendEmail,\n    'EMAIL_TO'      => $EIN,\n    \/\/\/\/---- setting variables for PDF\n      'EIN'           => $EIN,\n      'AGENCY_NAME'   => $AgencyName,\n      'EMPLOYEE_NAME' => $EmployeeName,\n      'POSITION'      => $Position,\n      'JOB_TITLE'     => $JobTitle,\n      'PDF_NAME' => 'Terminate_Agreement_' . $data['_request']['id']. '_'. $EIN,   \n      'data_encoded_termination' => $data_encoded_termination,\n];\n?>","timeout":60,"run_as_user_id":2,"created_at":"2021-04-16T13:44:43+00:00","updated_at":"2022-11-07T20:15:17+00:00","status":"ACTIVE","script_category_id":"7","script_executor_id":1,"categories":[{"id":7,"uuid":"97b0b2a3-5ff9-41c7-a1a5-3ab65a02e585","name":"Test Cases Pablo","status":"ACTIVE","is_system":0,"created_at":"2021-06-14T13:33:26+00:00","updated_at":"2022-11-07T20:07:50+00:00","pivot":{"assignable_id":159,"category_id":7,"category_type":"ProcessMaker\\Models\\ScriptCategory"}}]}],"environment_variables":[]}