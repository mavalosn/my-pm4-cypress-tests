{"type":"process_package","version":"1","process":{"id":13,"process_category_id":"4","user_id":1,"description":"TCP4-2275 Verify Chain of Scripts","name":"TCP4-2275 Verify Chain of Scripts","cancel_screen_id":null,"request_detail_screen_id":null,"status":"ACTIVE","is_valid":1,"package_key":null,"pause_timer_start":0,"deleted_at":null,"created_at":"2021-06-25T16:18:05+00:00","updated_at":"2022-09-09T22:04:50+00:00","start_events":[{"id":"node_21","name":"Manual Synch Roles","config":"{\"web_entry\":null}","ownerProcessId":"ProcessId","eventDefinitions":[],"ownerProcessName":"ProcessName","allowInterstitial":"false"}],"warnings":null,"self_service_tasks":[],"signal_events":[],"conditional_events":[],"properties":{"manager_id":null,"manager_can_cancel_request":false},"has_timer_start_events":false,"notifications":{"requester":{"started":false,"canceled":false,"completed":false},"assignee":{"started":false,"canceled":false,"completed":false},"participants":{"started":false,"canceled":false,"completed":false},"manager":{"started":false,"canceled":false,"completed":false}},"task_notifications":{},"bpmn":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn:definitions xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xmlns:bpmn=\"http:\/\/www.omg.org\/spec\/BPMN\/20100524\/MODEL\" xmlns:bpmndi=\"http:\/\/www.omg.org\/spec\/BPMN\/20100524\/DI\" xmlns:dc=\"http:\/\/www.omg.org\/spec\/DD\/20100524\/DC\" xmlns:di=\"http:\/\/www.omg.org\/spec\/DD\/20100524\/DI\" xmlns:pm=\"http:\/\/processmaker.com\/BPMN\/2.0\/Schema.xsd\" xmlns:tns=\"http:\/\/sourceforge.net\/bpmn\/definitions\/_1530553328908\" xmlns:xsd=\"http:\/\/www.w3.org\/2001\/XMLSchema\" targetNamespace=\"http:\/\/bpmn.io\/schema\/bpmn\" exporter=\"ProcessMaker Modeler\" exporterVersion=\"1.0\" xsi:schemaLocation=\"http:\/\/www.omg.org\/spec\/BPMN\/20100524\/MODEL http:\/\/bpmn.sourceforge.net\/schemas\/BPMN20.xsd\">\n  <bpmn:process id=\"ProcessId\" name=\"ProcessName\" isExecutable=\"true\">\n    <bpmn:scriptTask id=\"node_8\" name=\"Script A\" pm:scriptRef=\"16\">\n      <bpmn:incoming>node_7<\/bpmn:incoming>\n      <bpmn:outgoing>node_10<\/bpmn:outgoing>\n    <\/bpmn:scriptTask>\n    <bpmn:scriptTask id=\"node_13\" name=\"Script B\" pm:scriptRef=\"15\">\n      <bpmn:incoming>node_10<\/bpmn:incoming>\n      <bpmn:outgoing>node_18<\/bpmn:outgoing>\n    <\/bpmn:scriptTask>\n    <bpmn:exclusiveGateway id=\"node_14\" name=\"A or B?\">\n      <bpmn:incoming>node_18<\/bpmn:incoming>\n      <bpmn:outgoing>node_17<\/bpmn:outgoing>\n      <bpmn:outgoing>node_19<\/bpmn:outgoing>\n    <\/bpmn:exclusiveGateway>\n    <bpmn:endEvent id=\"node_16\" name=\"End Event\" pm:screenRef=\"\">\n      <bpmn:incoming>node_17<\/bpmn:incoming>\n    <\/bpmn:endEvent>\n    <bpmn:sequenceFlow id=\"node_17\" name=\"A\" sourceRef=\"node_14\" targetRef=\"node_16\">\n      <bpmn:conditionExpression xsi:type=\"bpmn:tFormalExpression\">a == 'A'<\/bpmn:conditionExpression>\n    <\/bpmn:sequenceFlow>\n    <bpmn:scriptTask id=\"node_20\" name=\"Script C\" pm:scriptRef=\"19\">\n      <bpmn:incoming>node_19<\/bpmn:incoming>\n      <bpmn:outgoing>node_12<\/bpmn:outgoing>\n    <\/bpmn:scriptTask>\n    <bpmn:sequenceFlow id=\"node_19\" name=\"B\" sourceRef=\"node_14\" targetRef=\"node_20\">\n      <bpmn:conditionExpression xsi:type=\"bpmn:tFormalExpression\">a == 'B'<\/bpmn:conditionExpression>\n    <\/bpmn:sequenceFlow>\n    <bpmn:scriptTask id=\"node_30\" name=\"Script  D\" pm:scriptRef=\"17\">\n      <bpmn:incoming>node_2<\/bpmn:incoming>\n      <bpmn:outgoing>node_11<\/bpmn:outgoing>\n    <\/bpmn:scriptTask>\n    <bpmn:scriptTask id=\"node_32\" name=\"Script E\" pm:scriptRef=\"18\">\n      <bpmn:incoming>node_6<\/bpmn:incoming>\n      <bpmn:outgoing>node_22<\/bpmn:outgoing>\n    <\/bpmn:scriptTask>\n    <bpmn:startEvent id=\"node_21\" name=\"Manual Synch Roles\" pm:allowInterstitial=\"false\" pm:config=\"{&quot;web_entry&quot;:null}\">\n      <bpmn:outgoing>node_7<\/bpmn:outgoing>\n    <\/bpmn:startEvent>\n    <bpmn:sequenceFlow id=\"node_7\" name=\"\" sourceRef=\"node_21\" targetRef=\"node_8\"\/>\n    <bpmn:sequenceFlow id=\"node_10\" name=\"\" sourceRef=\"node_8\" targetRef=\"node_13\"\/>\n    <bpmn:sequenceFlow id=\"node_18\" name=\"\" sourceRef=\"node_13\" targetRef=\"node_14\"\/>\n    <bpmn:parallelGateway id=\"node_3\" name=\"A\" gatewayDirection=\"Diverging\">\n      <bpmn:incoming>node_12<\/bpmn:incoming>\n      <bpmn:outgoing>node_2<\/bpmn:outgoing>\n      <bpmn:outgoing>node_6<\/bpmn:outgoing>\n    <\/bpmn:parallelGateway>\n    <bpmn:sequenceFlow id=\"node_2\" name=\"\" sourceRef=\"node_3\" targetRef=\"node_30\"\/>\n    <bpmn:sequenceFlow id=\"node_6\" name=\"Yes\" sourceRef=\"node_3\" targetRef=\"node_32\"\/>\n    <bpmn:sequenceFlow id=\"node_12\" name=\"\" sourceRef=\"node_20\" targetRef=\"node_3\"\/>\n    <bpmn:parallelGateway id=\"node_5\" name=\"B\" gatewayDirection=\"Diverging\">\n      <bpmn:incoming>node_11<\/bpmn:incoming>\n      <bpmn:incoming>node_22<\/bpmn:incoming>\n      <bpmn:outgoing>node_25<\/bpmn:outgoing>\n    <\/bpmn:parallelGateway>\n    <bpmn:sequenceFlow id=\"node_11\" name=\"\" sourceRef=\"node_30\" targetRef=\"node_5\"\/>\n    <bpmn:sequenceFlow id=\"node_22\" name=\"\" sourceRef=\"node_32\" targetRef=\"node_5\"\/>\n    <bpmn:endEvent id=\"node_23\" name=\"End Event\">\n      <bpmn:incoming>node_25<\/bpmn:incoming>\n    <\/bpmn:endEvent>\n    <bpmn:sequenceFlow id=\"node_25\" name=\"\" sourceRef=\"node_5\" targetRef=\"node_23\"\/>\n  <\/bpmn:process>\n  <bpmn:collaboration id=\"collaboration_0\">\n    <bpmn:participant id=\"node_1\" name=\"Verify Chain of Scripts\" processRef=\"ProcessId\"\/>\n  <\/bpmn:collaboration>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagramId\">\n    <bpmndi:BPMNPlane id=\"BPMNPlaneId\" bpmnElement=\"collaboration_0\">\n      <bpmndi:BPMNShape id=\"node_1_di\" bpmnElement=\"node_1\">\n        <dc:Bounds x=\"-655\" y=\"75\" width=\"1575\" height=\"445\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_8_di\" bpmnElement=\"node_8\">\n        <dc:Bounds x=\"-410\" y=\"205\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_13_di\" bpmnElement=\"node_13\">\n        <dc:Bounds x=\"-210\" y=\"205\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_14_di\" bpmnElement=\"node_14\">\n        <dc:Bounds x=\"40\" y=\"225\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_16_di\" bpmnElement=\"node_16\">\n        <dc:Bounds x=\"40\" y=\"100\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_17_di\" bpmnElement=\"node_17\">\n        <di:waypoint x=\"58\" y=\"225\"\/>\n        <di:waypoint x=\"58\" y=\"118\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_20_di\" bpmnElement=\"node_20\">\n        <dc:Bounds x=\"180\" y=\"205\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_19_di\" bpmnElement=\"node_19\">\n        <di:waypoint x=\"40\" y=\"243\"\/>\n        <di:waypoint x=\"180\" y=\"243\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_30_di\" bpmnElement=\"node_30\">\n        <dc:Bounds x=\"500\" y=\"105\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_32_di\" bpmnElement=\"node_32\">\n        <dc:Bounds x=\"490\" y=\"350\" width=\"116\" height=\"76\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"node_21_di\" bpmnElement=\"node_21\">\n        <dc:Bounds x=\"-540\" y=\"225\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_7_di\" bpmnElement=\"node_7\">\n        <di:waypoint x=\"-522\" y=\"243\"\/>\n        <di:waypoint x=\"-352\" y=\"243\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"node_10_di\" bpmnElement=\"node_10\">\n        <di:waypoint x=\"-352\" y=\"243\"\/>\n        <di:waypoint x=\"-152\" y=\"243\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"node_18_di\" bpmnElement=\"node_18\">\n        <di:waypoint x=\"-152\" y=\"243\"\/>\n        <di:waypoint x=\"58\" y=\"243\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_3_di\" bpmnElement=\"node_3\">\n        <dc:Bounds x=\"400\" y=\"225\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_2_di\" bpmnElement=\"node_2\">\n        <di:waypoint x=\"418\" y=\"243\"\/>\n        <di:waypoint x=\"450\" y=\"143\"\/>\n        <di:waypoint x=\"558\" y=\"143\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"node_6_di\" bpmnElement=\"node_6\">\n        <di:waypoint x=\"418\" y=\"243\"\/>\n        <di:waypoint x=\"418\" y=\"360\"\/>\n        <di:waypoint x=\"548\" y=\"388\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"node_12_di\" bpmnElement=\"node_12\">\n        <di:waypoint x=\"238\" y=\"243\"\/>\n        <di:waypoint x=\"418\" y=\"243\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_5_di\" bpmnElement=\"node_5\">\n        <dc:Bounds x=\"650\" y=\"230\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_11_di\" bpmnElement=\"node_11\">\n        <di:waypoint x=\"558\" y=\"143\"\/>\n        <di:waypoint x=\"668\" y=\"248\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"node_22_di\" bpmnElement=\"node_22\">\n        <di:waypoint x=\"548\" y=\"388\"\/>\n        <di:waypoint x=\"668\" y=\"248\"\/>\n      <\/bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"node_23_di\" bpmnElement=\"node_23\">\n        <dc:Bounds x=\"810\" y=\"230\" width=\"36\" height=\"36\"\/>\n      <\/bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"node_25_di\" bpmnElement=\"node_25\">\n        <di:waypoint x=\"668\" y=\"248\"\/>\n        <di:waypoint x=\"828\" y=\"248\"\/>\n      <\/bpmndi:BPMNEdge>\n    <\/bpmndi:BPMNPlane>\n  <\/bpmndi:BPMNDiagram>\n<\/bpmn:definitions>\n","anonymousUserId":1},"process_categories":[{"id":4,"name":"Les Schwab","status":"ACTIVE","is_system":0,"created_at":"2021-04-29T15:12:34+00:00","updated_at":"2022-09-09T22:04:42+00:00","pivot":{"assignable_id":13,"category_id":4,"category_type":"ProcessMaker\\Models\\ProcessCategory"}}],"screens":[],"screen_categories":[],"scripts":[{"id":15,"key":null,"title":"Script B","description":"Script B","language":"php","code":"<?php \nif (date('d')%2 == 0){\n    $a = 'A';\n}else\n{\n    $a = 'B';\n}\n\nreturn [\"a\" => $a];\n?>","timeout":60,"run_as_user_id":2,"created_at":"2021-06-17T19:31:26+00:00","updated_at":"2022-09-12T14:09:35+00:00","status":"ACTIVE","script_category_id":"4","script_executor_id":1,"categories":[{"id":4,"name":"Les Schwab","status":"ACTIVE","is_system":0,"created_at":"2021-05-07T14:44:57+00:00","updated_at":"2022-09-09T22:04:42+00:00","pivot":{"assignable_id":15,"category_id":4,"category_type":"ProcessMaker\\Models\\ScriptCategory"}}]},{"id":16,"key":null,"title":"Script A","description":"Script A","language":"php","code":"<?php \n\/*  \n *  Welcome to ProcessMaker 4 Script Editor \n *  To access Environment Variables use getenv(\"ENV_VAR_NAME\") \n *  To access Request Data use $data \n *  To access Configuration Data use $config \n *  To preview your script, click the Run button using the provided input and config data \n *  Return an array and it will be merged with the processes data \n *  Example API to retrieve user email by their ID $api->users()->getUserById(1)['email'] \n *  API Documentation https:\/\/github.com\/ProcessMaker\/sdk-php#documentation-for-api-endpoints \n *\/\n\n$client = new GuzzleHttp\\Client(['verify' => false]);\n\n\/\/Get Bearer Token\n$url = \"https:\/\/auth-common-services-dev.lesschwab.com\/oauth2\/token\";\n\n$res = $client->request('POST', $url, [\n    \"headers\" => [\n        \"Accept\" => \"*\/*\",\n        \"Host\" => \"auth-common-services-dev.lesschwab.com\",\n        \"Accept-Encoding\" => \"gzip, deflate, br\",\n        \"Content-Type\" => \"application\/x-www-form-urlencoded\",\n        \"Content-Length\" => \"140\",\n    ],\n    \"form_params\" => [\n        \"grant_type\" => \"client_credentials\",\n        \"scope\" => \"\",\n        \"client_id\" => \"3qp4a04841bv67c3ghjttr2abm\",\n        \"client_secret\" => \"17u28tn5q7oce86a073479ocr2j44gac26org74sns4ijjvtt6m4\",\n    ],\n]);\n$token = json_decode($res->getBody()->getContents())->access_token;\n\nreturn [\"lesSchwabToken\" => $token];","timeout":60,"run_as_user_id":2,"created_at":"2021-06-18T13:53:10+00:00","updated_at":"2022-09-09T22:04:50+00:00","status":"ACTIVE","script_category_id":"4","script_executor_id":1,"categories":[{"id":4,"name":"Les Schwab","status":"ACTIVE","is_system":0,"created_at":"2021-05-07T14:44:57+00:00","updated_at":"2022-09-09T22:04:42+00:00","pivot":{"assignable_id":16,"category_id":4,"category_type":"ProcessMaker\\Models\\ScriptCategory"}}]},{"id":17,"key":null,"title":"Script D","description":"Script D","language":"php","code":"<?php \n    \/\/ input array\n    $state = array(\"AS\"=>\"ASSAM\", \"OR\"=>\"ORRISA\", \"KR\"=>\"KERELA\");\n      \n    extract($state);\n      \n    \/\/ after using extract() function\n$text = \"$AS is $AS $KR is $KR $OR is $OR\";\n$array_implode = [\"Israel\", \"Japan\", \"Germany\"];\n$array_text_implode = implode(\" \", $array_implode);\n$date_script = '2021-09-28';\nreturn ['text_imploded'=> $array_text_implode];     \n?>","timeout":60,"run_as_user_id":2,"created_at":"2021-06-18T15:20:50+00:00","updated_at":"2022-09-09T22:04:50+00:00","status":"ACTIVE","script_category_id":"4","script_executor_id":1,"categories":[{"id":4,"name":"Les Schwab","status":"ACTIVE","is_system":0,"created_at":"2021-05-07T14:44:57+00:00","updated_at":"2022-09-09T22:04:42+00:00","pivot":{"assignable_id":17,"category_id":4,"category_type":"ProcessMaker\\Models\\ScriptCategory"}}]},{"id":18,"key":null,"title":"Script E 2","description":"Script E","language":"php","code":"<?php \n    \/\/ input array\n    $state = array(\"AS\"=>\"ASSAM\", \"OR\"=>\"ORRISA\", \"KR\"=>\"KERELA\");\n      \n    extract($state);\n      \n    \/\/ after using extract() function\n$text = \"$AS is $AS $KR is $KR $OR is $OR\";\n$array_implode = [\"Israel\", \"Japan\", \"Germany\"];\n$array_text_implode = implode(\" \", $array_implode);\n$date_script = '2021-09-28';\nreturn ['nested_date_picker'=> $date_script];     \n?>","timeout":60,"run_as_user_id":2,"created_at":"2021-06-18T15:28:28+00:00","updated_at":"2022-09-09T22:04:50+00:00","status":"ACTIVE","script_category_id":"4","script_executor_id":1,"categories":[{"id":4,"name":"Les Schwab","status":"ACTIVE","is_system":0,"created_at":"2021-05-07T14:44:57+00:00","updated_at":"2022-09-09T22:04:42+00:00","pivot":{"assignable_id":18,"category_id":4,"category_type":"ProcessMaker\\Models\\ScriptCategory"}}]},{"id":19,"key":null,"title":"Script C","description":"Script C","language":"php","code":"<?php \n    \/\/ input array\n    $state = array(\"AS\"=>\"ASSAM\", \"OR\"=>\"ORRISA\", \"KR\"=>\"KERELA\");\n      \n    extract($state);\n      \n    \/\/ after using extract() function\n$text = \"$AS is $AS $KR is $KR $OR is $OR\";\n$array_implode = [\"Israel\", \"Japan\", \"Germany\"];\n$array_text_implode = implode(\" \", $array_implode);\n$date_script = '2021-09-28';\nreturn ['text'=> $text];     \n?>","timeout":60,"run_as_user_id":2,"created_at":"2021-06-18T15:33:34+00:00","updated_at":"2022-09-09T22:04:50+00:00","status":"ACTIVE","script_category_id":"4","script_executor_id":1,"categories":[{"id":4,"name":"Les Schwab","status":"ACTIVE","is_system":0,"created_at":"2021-05-07T14:44:57+00:00","updated_at":"2022-09-09T22:04:42+00:00","pivot":{"assignable_id":19,"category_id":4,"category_type":"ProcessMaker\\Models\\ScriptCategory"}}]}],"environment_variables":[]}